<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Extract and Aggregate Objects of Class 'mefa' — aggregate.mefa • mefa</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Extract and Aggregate Objects of Class 'mefa' — aggregate.mefa" />
<meta property="og:description" content="These methods are useful when extracting or aggregating 'mefa' objects. The count data matrix, the matrices for segments and the linked tables of samples and taxa are extracted or aggregated at the same time." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-55877016-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-55877016-2');
</script>


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mefa</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.2.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/psolymos/mefa">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extract and Aggregate Objects of Class 'mefa'</h1>
    
    <div class="hidden name"><code>aggregate.mefa.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>These methods are useful when extracting or aggregating 'mefa' objects. The count data matrix, the matrices for segments and the linked tables of samples and taxa are extracted or aggregated at the same time.</p>
    </div>

    <pre class="usage"># S3 method for mefa
aggregate(x, by.samp = NULL, by.taxa = NULL, ...)
# S3 method for mefa
[(x, i = 1:dim(x)[1], j = 1:dim(x)[2], k = 1:dim(x)[3], drop = FALSE)
xtab(x, ...)
samp(x, ...)
taxa(x, ...)
segm(x, ...)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>an object of class 'mefa'.</p></td>
    </tr>
    <tr>
      <th>by.samp</th>
      <td><p>a vector with length as the number of samples and more than one unique values to use aggregating samples.</p></td>
    </tr>
    <tr>
      <th>by.taxa</th>
      <td><p>a vector with length as the number of taxa and more than one unique values to use aggregating taxa.</p></td>
    </tr>
    <tr>
      <th>i, j, k</th>
      <td><p>index value or a vector of indices for samples, taxa and segments, respectively. Can be numeric or character. Negative numeric values indicate items to be excluded.</p></td>
    </tr>
    <tr>
      <th>drop</th>
      <td><p>logical, if <code>TRUE</code> the unused factor leves in the linked tables for samples and species will be dropped after extraction. If <code>FALSE</code> (default) unused factor levels are left intact.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>other arguments passed to the generic function.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>If a 'mefa' object is aggregated, either or both tables for samples and taxa (depending on if the aggregation was made by rows, columns or both) are set to <code>NULL</code>. Because aggregation is not straightforward for data frames with mixed type of data (e.g. factors, character vectors), and the applied function (mean, sum, etc.) depends on the type of the numeric variables. Consequently, if new data table is needed, that must be defined again by the function <code><a href='mefa.html'>mefa</a></code>. If the original data frame contained only numeric columns, it can be easily aggregated if the function to apply is known. For factors and numeric columns, however, such aggregation is not defined.</p>
<p>The ordering of dimensions follow the ordering of the indices in the extraction call, except for nested subsets, when sequence of nested segments is not allowed to be affected by the extraction (error message is given). The extracting method retains samples and taxa tables as well. If non-nested segments are extracted, the <code>x$xtab</code> matrix will contain the sum of segments, and not the original values of <code>x$xtab</code>. Thus if a resulting 'mefa' object has only one segment, it will be identical to the <code>x$xtab</code> matrix. If nested segments are extracted, <code>x$xtab</code> will be identical to the last segment and not the sum of segments. See the examples for these differences. If the original object had nested segments and the first is excluded, segment names change as a result. If only one segment remains in the result, the nested attribute is turned off.</p>
<p>If the aggregation is done over a vector that is not part of the tables inside the 'mefa' object, it must have a class attribute to be recognised, use e.g. the <code><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></code> function (see 'Examples').</p>
<p>The resulting 'mefa' object must contain at least 2 samples and 2 taxa.</p>
<p>Extractor functions <code>xtab</code>, <code>samp</code>, <code>taxa</code>, and <code>segm</code> extract the corresponding element from the 'mefa' object.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class 'mefa'.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>S\'olymos P. (2008) mefa: an R package for handling and reporting count data. <em>Community Ecology</em> <b>9</b>, 125--127.</p>
<p>S\'olymos P. (2009) Processing ecological data in R with the mefa package. <em>Journal of Statistical Software</em> <b>29(8)</b>, 1--28. <a href='http://www.jstatsoft.org/v29/i08/'>http://www.jstatsoft.org/v29/i08/</a></p>
<p><a href='http://mefa.r-forge.r-project.org/'>http://mefa.r-forge.r-project.org/</a></p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>The <code>aggregate</code> method replaces the function <code>strify</code>, the <code>[</code> method replaces the function <code>exclmf</code> of the old (&lt; 2.0) versions of the <strong>mefa</strong> package.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='mefa.html'>mefa</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>dol.count</span>, <span class='no'>dol.samp</span>, <span class='no'>dol.taxa</span>)
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='mefa.html'>mefa</a></span>(<span class='fu'><a href='stcs.html'>stcs</a></span>(<span class='no'>dol.count</span>), <span class='no'>dol.samp</span>, <span class='no'>dol.taxa</span>)
<span class='co'>## These two are identical</span>
<span class='fu'><a href='https://rdrr.io/r/stats/aggregate.html'>aggregate</a></span>(<span class='no'>x</span>, <span class='st'>"microhab"</span>)</div><div class='output co'>#&gt; 
#&gt; An object of class 'mefa' containing
#&gt; 
#&gt;  $ xtab: 731 individuals of 28 taxa in 4 samples,
#&gt;  $ segm: 2 (non-nested) segments:
#&gt;          fresh, broken,
#&gt;  $ samp: table for samples not provided,
#&gt;  $ taxa: table for taxa provided (4 variables).
#&gt; </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/stats/aggregate.html'>aggregate</a></span>(<span class='no'>x</span>, <span class='no'>x</span>$<span class='no'>samp</span>$<span class='no'>microhab</span>, <span class='kw'>inside</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; 
#&gt; An object of class 'mefa' containing
#&gt; 
#&gt;  $ xtab: 731 individuals of 28 taxa in 4 samples,
#&gt;  $ segm: 2 (non-nested) segments:
#&gt;          fresh, broken,
#&gt;  $ samp: table for samples not provided,
#&gt;  $ taxa: table for taxa provided (4 variables).
#&gt; </div><div class='input'><span class='co'>## Interaction</span>
<span class='fu'><a href='https://rdrr.io/r/stats/aggregate.html'>aggregate</a></span>(<span class='no'>x</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"method"</span>, <span class='st'>"microhab"</span>))</div><div class='output co'>#&gt; 
#&gt; An object of class 'mefa' containing
#&gt; 
#&gt;  $ xtab: 731 individuals of 28 taxa in 8 samples,
#&gt;  $ segm: 2 (non-nested) segments:
#&gt;          fresh, broken,
#&gt;  $ samp: table for samples not provided,
#&gt;  $ taxa: table for taxa provided (4 variables).
#&gt; </div><div class='input'><span class='co'>## Both samples and taxa tables</span>
<span class='fu'><a href='https://rdrr.io/r/stats/aggregate.html'>aggregate</a></span>(<span class='no'>x</span>, <span class='st'>"microhab"</span>, <span class='st'>"familia"</span>)</div><div class='output co'>#&gt; 
#&gt; An object of class 'mefa' containing
#&gt; 
#&gt;  $ xtab: 731 individuals of 9 taxa in 4 samples,
#&gt;  $ segm: 2 (non-nested) segments:
#&gt;          fresh, broken,
#&gt;  $ samp: table for samples not provided,
#&gt;  $ taxa: table for taxa not provided.
#&gt; </div><div class='input'><span class='co'>## To use a factor</span>
<span class='fu'><a href='https://rdrr.io/r/stats/aggregate.html'>aggregate</a></span>(<span class='no'>x</span>, <span class='st'>"microhab"</span>, <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span>(<span class='fu'><a href='https://rdrr.io/r/stats/Binomial.html'>rbinom</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span>(<span class='no'>x</span>)[<span class='fl'>2</span>], <span class='fl'>1</span>, <span class='fl'>0.5</span>)))</div><div class='output co'>#&gt; 
#&gt; An object of class 'mefa' containing
#&gt; 
#&gt;  $ xtab: 731 individuals of 2 taxa in 4 samples,
#&gt;  $ segm: 2 (non-nested) segments:
#&gt;          fresh, broken,
#&gt;  $ samp: table for samples not provided,
#&gt;  $ taxa: table for taxa not provided.
#&gt; </div><div class='input'><span class='co'>## Extraction</span>
<span class='no'>x</span>[<span class='fl'>1</span>:<span class='fl'>10</span>, ]</div><div class='output co'>#&gt; 
#&gt; An object of class 'mefa' containing
#&gt; 
#&gt;  $ xtab: 236 individuals of 28 taxa in 10 samples,
#&gt;  $ segm: 2 (non-nested) segments:
#&gt;          fresh, broken,
#&gt;  $ samp: table for samples provided (2 variables),
#&gt;  $ taxa: table for taxa provided (4 variables).
#&gt; </div><div class='input'><span class='no'>x</span>[, <span class='fl'>1</span>:<span class='fl'>5</span>]</div><div class='output co'>#&gt; 
#&gt; An object of class 'mefa' containing
#&gt; 
#&gt;  $ xtab: 126 individuals of 5 taxa in 24 samples,
#&gt;  $ segm: 2 (non-nested) segments:
#&gt;          fresh, broken,
#&gt;  $ samp: table for samples provided (2 variables),
#&gt;  $ taxa: table for taxa provided (4 variables).
#&gt; </div><div class='input'><span class='no'>x</span>[, , <span class='st'>"broken"</span>]</div><div class='output co'>#&gt; 
#&gt; An object of class 'mefa' containing
#&gt; 
#&gt;  $ xtab: 338 individuals of 28 taxa in 24 samples,
#&gt;  $ segm: 1 (non-nested) segments:
#&gt;          broken,
#&gt;  $ samp: table for samples provided (2 variables),
#&gt;  $ taxa: table for taxa provided (4 variables).
#&gt; </div><div class='input'><span class='no'>x</span>[<span class='fl'>1</span>:<span class='fl'>10</span>, <span class='fl'>1</span>:<span class='fl'>5</span>]</div><div class='output co'>#&gt; 
#&gt; An object of class 'mefa' containing
#&gt; 
#&gt;  $ xtab: 33 individuals of 5 taxa in 10 samples,
#&gt;  $ segm: 2 (non-nested) segments:
#&gt;          fresh, broken,
#&gt;  $ samp: table for samples provided (2 variables),
#&gt;  $ taxa: table for taxa provided (4 variables).
#&gt; </div><div class='input'><span class='no'>x</span>[<span class='fl'>1</span>:<span class='fl'>10</span>, <span class='fl'>1</span>:<span class='fl'>5</span>, <span class='fl'>2</span>]</div><div class='output co'>#&gt; 
#&gt; An object of class 'mefa' containing
#&gt; 
#&gt;  $ xtab: 12 individuals of 5 taxa in 10 samples,
#&gt;  $ segm: 1 (non-nested) segments:
#&gt;          broken,
#&gt;  $ samp: table for samples provided (2 variables),
#&gt;  $ taxa: table for taxa provided (4 variables).
#&gt; </div><div class='input'><span class='co'>## Note factor levels</span>
<span class='no'>y</span> <span class='kw'>&lt;-</span> <span class='no'>x</span>[<span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span>(<span class='no'>x</span>$<span class='no'>samp</span>$<span class='no'>method</span> <span class='kw'>==</span> <span class='st'>"time"</span>), ]
<span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span>(<span class='no'>y</span>$<span class='no'>samp</span>$<span class='no'>method</span>)</div><div class='output co'>#&gt; [1] "time"    "quadrat"</div><div class='input'><span class='no'>z</span> <span class='kw'>&lt;-</span> <span class='no'>x</span>[<span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span>(<span class='no'>x</span>$<span class='no'>samp</span>$<span class='no'>method</span> <span class='kw'>==</span> <span class='st'>"time"</span>), <span class='kw'>drop</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>]
<span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span>(<span class='no'>z</span>$<span class='no'>samp</span>$<span class='no'>method</span>)</div><div class='output co'>#&gt; [1] "time"</div><div class='input'><span class='co'>## Note the differences in total sums</span>
<span class='no'>y</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='mefa.html'>mefa</a></span>(<span class='fu'><a href='stcs.html'>stcs</a></span>(<span class='no'>dol.count</span>), <span class='no'>dol.samp</span>, <span class='no'>dol.taxa</span>, <span class='kw'>nested</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>x</span>[ , , <span class='fl'>2</span>]</div><div class='output co'>#&gt; 
#&gt; An object of class 'mefa' containing
#&gt; 
#&gt;  $ xtab: 338 individuals of 28 taxa in 24 samples,
#&gt;  $ segm: 1 (non-nested) segments:
#&gt;          broken,
#&gt;  $ samp: table for samples provided (2 variables),
#&gt;  $ taxa: table for taxa provided (4 variables).
#&gt; </div><div class='input'><span class='no'>y</span>[ , , <span class='fl'>2</span>]</div><div class='output co'>#&gt; 
#&gt; An object of class 'mefa' containing
#&gt; 
#&gt;  $ xtab: 731 individuals of 28 taxa in 24 samples,
#&gt;  $ segm: 1 (non-nested) segments:
#&gt;          fresh-broken,
#&gt;  $ samp: table for samples provided (2 variables),
#&gt;  $ taxa: table for taxa provided (4 variables).
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#note">Note</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>P\'eter S\'olymos, <a href='mailto:solymos@ualberta.ca'>solymos@ualberta.ca</a></p>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Peter Solymos.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


